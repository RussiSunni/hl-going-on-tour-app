import{_ as d,u as c,l as f,o as _,c as p,a as e,w as n,v as o,k as h,j as b,f as v,p as w,d as U}from"./main-93ed520d.js";const V={setup(){return{usersStore:c()}},data(){return{userId:this.$route.params.id,user:{}}},created(){this.getUser()},methods:{getUser(){fetch("/users/api/"+this.userId).then(function(a){return a.json()}).then(a=>this.user=a).then(()=>{this.user.originalUsername=this.user.username,this.user.originalEmail=this.user.email})},ValidateForm(){this.user.first_name==""||this.user.first_name==null?alert("Please add a first name."):this.user.last_name==""||this.user.last_name==null?alert("Please add a last name."):this.user.username==""||this.user.username==null?alert("Please add a username."):this.user.email==""||this.user.email==null?alert("Please add an email address."):this.Submit()},ValidateEmail(){/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(this.user.email)||alert("Please enter a valid email address")},Submit(){const a={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstname:this.user.first_name,lastname:this.user.last_name,username:this.user.username,email:this.user.email,password:this.user.password,original_username:this.user.originalUsername,original_email:this.user.originalEmail})};var s="/users/api/"+this.userId+"/edit";fetch(s,a).then(function(l){return l.json()}).then(l=>{l.notification=="username already taken"||l.notification=="email already taken"?alert(l.notification):(alert(l.notification),this.usersStore.getUsers(),this.$router.push("/"))})}}},i=a=>(w("data-v-821350fa"),a=a(),U(),a),y={class:"container user-form mt-3"},x=i(()=>e("h1",null,"Edit User",-1)),g={class:"mb-3"},S=i(()=>e("label",{for:"firstname",class:"form-label"},"First name",-1)),k={class:"mb-3"},E=i(()=>e("label",{for:"lastname",class:"form-label"},"Last name",-1)),I={class:"mb-3"},P=i(()=>e("label",{class:"form-label"},"Username",-1)),j={class:"mb-3"},C=i(()=>e("label",{class:"form-label"},"Email address",-1)),B={class:"mb-3"},N=i(()=>e("label",{class:"form-label"},"Password",-1)),T={class:"d-flex justify-content-between"};function F(a,s,l,O,r,u){const m=f("router-link");return _(),p("div",y,[x,e("div",g,[S,n(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>r.user.first_name=t),type:"text",class:"form-control"},null,512),[[o,r.user.first_name]])]),e("div",k,[E,n(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>r.user.last_name=t),type:"text",class:"form-control"},null,512),[[o,r.user.last_name]])]),e("div",I,[P,n(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>r.user.username=t),type:"text",class:"form-control"},null,512),[[o,r.user.username]])]),e("div",j,[C,n(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>r.user.email=t),type:"email",class:"form-control",onBlur:s[4]||(s[4]=(...t)=>u.ValidateEmail&&u.ValidateEmail(...t))},null,544),[[o,r.user.email]])]),e("div",B,[N,n(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>r.user.password=t),type:"text",class:"form-control"},null,512),[[o,r.user.password]])]),e("div",T,[h(m,{class:"btn btn-dark",to:"/"},{default:b(()=>[v(" Cancel ")]),_:1}),e("button",{class:"btn btn-dark",onClick:s[6]||(s[6]=t=>u.ValidateForm())},"Submit")])])}const D=d(V,[["render",F],["__scopeId","data-v-821350fa"]]);export{D as default};
