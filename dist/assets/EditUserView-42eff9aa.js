import{_ as m,u as d,o as c,c as f,a as e,w as n,v as o,p,d as _}from"./main-416a5427.js";const h={setup(){return{usersStore:d()}},data(){return{userId:this.$route.params.id,user:{}}},created(){this.getUser()},methods:{getUser(){fetch("/users/api/"+this.userId).then(function(r){return r.json()}).then(r=>this.user=r).then(()=>{this.user.originalUsername=this.user.username,this.user.originalEmail=this.user.email})},ValidateForm(){this.user.first_name==""||this.user.first_name==null?alert("Please add a first name."):this.user.last_name==""||this.user.last_name==null?alert("Please add a last name."):this.user.username==""||this.user.username==null?alert("Please add a username."):this.user.email==""||this.user.email==null?alert("Please add an email address."):this.Submit()},ValidateEmail(){/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(this.user.email)||alert("Please enter a valid email address")},Submit(){const r={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstname:this.user.first_name,lastname:this.user.last_name,username:this.user.username,email:this.user.email,password:this.user.password,original_username:this.user.originalUsername,original_email:this.user.originalEmail})};var s="/users/api/"+this.userId+"/edit";fetch(s,r).then(function(i){return i.json()}).then(i=>{i.notification=="username already taken"||i.notification=="email already taken"?alert(i.notification):(alert(i.notification),this.usersStore.getUsers(),this.$router.push("/"))})}}},l=r=>(p("data-v-79e1fdc6"),r=r(),_(),r),b={class:"container user-form mt-3"},v=l(()=>e("h1",null,"Edit User",-1)),U={class:"mb-3"},w=l(()=>e("label",{for:"firstname",class:"form-label"},"First name",-1)),V={class:"mb-3"},y=l(()=>e("label",{for:"lastname",class:"form-label"},"Last name",-1)),g={class:"mb-3"},S=l(()=>e("label",{class:"form-label"},"Username",-1)),E={class:"mb-3"},x=l(()=>e("label",{class:"form-label"},"Email address",-1)),I={class:"mb-3"},P=l(()=>e("label",{class:"form-label"},"Password",-1));function k(r,s,i,B,a,u){return c(),f("div",b,[v,e("div",U,[w,n(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>a.user.first_name=t),type:"text",class:"form-control"},null,512),[[o,a.user.first_name]])]),e("div",V,[y,n(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>a.user.last_name=t),type:"text",class:"form-control"},null,512),[[o,a.user.last_name]])]),e("div",g,[S,n(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>a.user.username=t),type:"text",class:"form-control"},null,512),[[o,a.user.username]])]),e("div",E,[x,n(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>a.user.email=t),type:"email",class:"form-control",onBlur:s[4]||(s[4]=(...t)=>u.ValidateEmail&&u.ValidateEmail(...t))},null,544),[[o,a.user.email]])]),e("div",I,[P,n(e("input",{"onUpdate:modelValue":s[5]||(s[5]=t=>a.user.password=t),type:"text",class:"form-control"},null,512),[[o,a.user.password]])]),e("button",{class:"btn btn-dark",onClick:s[6]||(s[6]=t=>u.ValidateForm())},"Submit")])}const F=m(h,[["render",k],["__scopeId","data-v-79e1fdc6"]]);export{F as default};
